# ═══════════════════════════════════════════════════════════
# UniHR SaaS — Production Environment
# ═══════════════════════════════════════════════════════════
# Copy this file to .env.production and fill in ALL values.
#
# Generate SECRET_KEY:
#   python -c "import secrets; print(secrets.token_urlsafe(48))"
#
# Generate passwords:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
# ═══════════════════════════════════════════════════════════

# ── Application ──
APP_ENV=production
SECRET_KEY=                          # REQUIRED: ≥ 32 chars random string
ACCESS_TOKEN_EXPIRE_MINUTES=480      # 8 hours

# ── First Superuser (created by scripts/initial_data.py) ──
FIRST_SUPERUSER_EMAIL=               # REQUIRED: real admin email
FIRST_SUPERUSER_PASSWORD=            # REQUIRED: strong password (≥ 12 chars)

# ── Database (PostgreSQL + pgvector) ──
POSTGRES_SERVER=db
POSTGRES_USER=unihr
POSTGRES_PASSWORD=                   # REQUIRED: strong random password
POSTGRES_DB=unihr_saas

# ── Redis ──
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=                      # REQUIRED: strong random password
CELERY_BROKER_URL=redis://:YOUR_REDIS_PASSWORD@redis:6379/0
CELERY_RESULT_BACKEND=redis://:YOUR_REDIS_PASSWORD@redis:6379/0

# ── Admin Redis ──
ADMIN_REDIS_PASSWORD=                # REQUIRED: strong random password

# ── CORS (comma-separated allowed origins) ──
# For Linode + sslip.io:
# BACKEND_CORS_ORIGINS=https://app.172-237-11-179.sslip.io,https://admin.172-237-11-179.sslip.io
# For production domain:
BACKEND_CORS_ORIGINS=https://app.yourdomain.com,https://admin.yourdomain.com

# ── Frontend URLs (for proper redirects, SSO callbacks) ──
# For Linode + sslip.io:
# FRONTEND_URL=https://app.172-237-11-179.sslip.io
# ADMIN_FRONTEND_URL=https://admin.172-237-11-179.sslip.io
# For production domain:
FRONTEND_URL=https://app.yourdomain.com
ADMIN_FRONTEND_URL=https://admin.yourdomain.com

# ── Core API (Legacy Labor Law System) ──
CORE_API_URL=https://core.yourdomain.com
CORE_SERVICE_TOKEN=

# ── OpenAI (Generation + HyDE) ──
OPENAI_API_KEY=                      # REQUIRED
OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0.3
OPENAI_MAX_TOKENS=1500

# ── Voyage AI (Embeddings + Rerank) ──
VOYAGE_API_KEY=                      # REQUIRED
VOYAGE_MODEL=voyage-4-lite
EMBEDDING_DIMENSION=1024

# ── LlamaParse (Document Parsing) ──
LLAMAPARSE_API_KEY=                  # REQUIRED if LLAMAPARSE_ENABLED=true
LLAMAPARSE_ENABLED=true

# ── SSO / OAuth ──
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=
# For Linode + sslip.io:
# SSO_DEFAULT_REDIRECT_URI=https://app.172-237-11-179.sslip.io/login/callback
# For production domain:
SSO_DEFAULT_REDIRECT_URI=https://app.yourdomain.com/login/callback

# ── Rate Limiting ──
RATE_LIMIT_ENABLED=true
RATE_LIMIT_GLOBAL_PER_IP=200
RATE_LIMIT_PER_USER=60
RATE_LIMIT_PER_TENANT=300
RATE_LIMIT_CHAT_PER_USER=20

# ── Admin API Network Isolation ──
ADMIN_IP_WHITELIST_ENABLED=true
ADMIN_IP_WHITELIST=127.0.0.1,::1,172.16.0.0/12
ADMIN_TRUSTED_PROXY_IPS=127.0.0.1,::1

# ── File Storage ──
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=52428800               # 50MB

# ── Retrieval ──
RETRIEVAL_MODE=hybrid
RETRIEVAL_RERANK=true
RETRIEVAL_CACHE_TTL=300
RETRIEVAL_TOP_K=5

# ── Monitoring ──
GRAFANA_USER=admin
GRAFANA_PASSWORD=                    # REQUIRED: strong password
# For Linode + sslip.io:
# GRAFANA_ROOT_URL=https://grafana.172-237-11-179.sslip.io
# For production domain:
GRAFANA_ROOT_URL=https://grafana.yourdomain.com

# ── Gateway ──
GATEWAY_HTTP_PORT=80
GATEWAY_HTTPS_PORT=443
