# UniHR 使用者操作手冊

> 版本: 1.0 | 更新日期: 2026-02-07

---

## 目錄

1. [租戶管理員手冊](#1-租戶管理員手冊)
2. [一般員工使用手冊](#2-一般員工使用手冊)
3. [系統管理員手冊](#3-系統管理員手冊)
4. [FAQ 與 Troubleshooting](#4-faq-與-troubleshooting)

---

## 1. 租戶管理員手冊

### 1.1 首次登入

1. 收到邀請郵件後，點擊連結設定密碼
2. 開啟 `https://app.unihr.com`，輸入 Email 和密碼
3. 首次登入會引導至公司設定頁面

### 1.2 公司基本設定

路徑：**設定 → 公司資訊**

| 設定項 | 說明 |
|--------|------|
| 公司名稱 | 顯示在系統內的公司名稱 |
| 品牌 Logo | 建議尺寸 200×60px，支援 PNG/SVG |
| 主色調 | 選擇品牌色（如 #2563eb），影響按鈕/連結顏色 |
| 輔色調 | 選擇輔助色，影響背景/強調色 |
| Favicon | 網站圖示，建議 32×32px ICO/PNG |

> **💡 提示**：品牌設定為 Pro 以上方案功能。Free 方案使用 UniHR 預設品牌。

### 1.3 成員管理

路徑：**設定 → 成員管理**

#### 邀請成員
1. 點擊「邀請成員」按鈕
2. 輸入 Email 地址
3. 選擇角色：
   - **Admin** — 可管理公司設定、成員、文件
   - **HR** — 可上傳文件、查看稽核記錄
   - **Employee** — 可提問、查看對話記錄
   - **Viewer** — 僅檢視，無法提問

4. 點擊「發送邀請」

#### 停權 / 刪除成員
- 點擊成員列表中的 ⋯ 選單
- 選擇「停權」（暫時凍結）或「刪除」（永久移除）

### 1.4 部門管理

路徑：**設定 → 部門**

- 建立部門並指派成員
- 支援多層級部門結構（父部門 → 子部門）
- 文件可指定歸屬部門，實現部門級資料隔離

### 1.5 文件上傳

路徑：**知識庫 → 文件管理**

#### 支援格式
| 格式 | 副檔名 | 最大大小 |
|------|--------|---------|
| PDF | .pdf | 50MB |
| Word | .docx | 50MB |
| Excel | .xlsx | 50MB |
| 純文字 | .txt | 50MB |
| RTF | .rtf | 50MB |
| HTML | .html | 50MB |

#### 上傳流程
1. 點擊「上傳文件」或拖曳檔案至上傳區
2. 選擇歸屬部門（可選）
3. 確認上傳
4. 系統自動執行：
   - 文件解析
   - 文字切片
   - 向量化（用於 AI 搜尋）
   - 品質檢查報告

5. 狀態變化：`pending` → `processing` → `processed`（或 `error`）

#### 查看文件狀態
- ✅ **processed** — 處理完成，可被 AI 引用
- ⏳ **processing** — 處理中，請稍候
- ❌ **error** — 處理失敗，查看錯誤訊息並重新上傳

### 1.6 SSO 設定

路徑：**設定 → SSO 單一登入**（Pro 以上方案）

#### Google SSO
1. 前往 Google Cloud Console 建立 OAuth 2.0 憑證
2. 設定 Redirect URI: `https://app.unihr.com/api/v1/auth/sso/callback/google`
3. 在 UniHR 填入 Client ID 和 Client Secret
4. 設定允許的 Email Domain（如 `@yourcompany.com`）
5. 啟用

#### Microsoft SSO
1. 前往 Azure AD 註冊應用程式
2. 設定 Redirect URI: `https://app.unihr.com/api/v1/auth/sso/callback/microsoft`
3. 在 UniHR 填入 Client ID 和 Client Secret
4. 啟用

### 1.7 稽核記錄

路徑：**稽核 → 操作記錄**

記錄所有使用者操作：
- 登入/登出
- 文件上傳/刪除
- 聊天提問
- 設定變更
- 成員管理操作

支援篩選：
- 時間範圍
- 使用者
- 操作類型

### 1.8 用量監控

路徑：**稽核 → 用量統計**

監控公司的 AI 使用量：
- 本月查詢次數
- Token 使用量
- 文件數量 / 儲存空間
- 用量趨勢圖表

> **⚠️ 注意**：接近配額上限時系統會發送告警通知。

### 1.9 自訂域名

路徑：**設定 → 自訂域名**（Enterprise 方案）

1. 輸入您的域名（如 `hr.yourcompany.com`）
2. 系統生成 DNS TXT 驗證記錄
3. 在您的 DNS 管理介面新增 TXT 記錄
4. 回到 UniHR 點擊「驗證」
5. 驗證成功後等待 SSL 憑證配置
6. 完成後即可透過自訂域名存取

---

## 2. 一般員工使用手冊

### 2.1 登入

1. 開啟公司提供的 UniHR 網址
2. 使用 Email/密碼 或 SSO 登入

### 2.2 提問（AI 問答）

1. 在首頁的聊天介面輸入問題
2. 系統同時搜尋：
   - 📋 **公司內規**（如：公司請假規定、出差政策）
   - ⚖️ **勞動法規**（如：勞基法、性別平等法）
3. AI 會合併兩者給出完整回答
4. 回答會標註引用來源

#### 提問範例
| 類型 | 範例問題 |
|------|---------|
| 請假 | 「請病假需要什麼證明？」 |
| 加班 | 「加班費怎麼計算？」 |
| 特休 | 「我到職滿一年有幾天特休？」 |
| 離職 | 「離職預告期要多久？」 |
| 保險 | 「勞保涵蓋哪些項目？」 |

### 2.3 對話記錄

路徑：**對話 → 歷史記錄**

- 查看過去的所有對話
- 可繼續已有對話（追問相關問題）
- 支援刪除對話

### 2.4 個人設定

路徑：右上角 **頭像 → 設定**

- 修改顯示名稱
- 變更密碼

---

## 3. 系統管理員手冊

### 3.1 平台管理 Dashboard

路徑：`https://admin.unihr.com`

登入後可看到：
- 平台總覽（租戶數、使用者數、文件數、對話數）
- 總成本統計
- 7 天趨勢圖
- Top 5 租戶

### 3.2 租戶管理

| 操作 | 說明 |
|------|------|
| 查看租戶 | 列出所有租戶，可搜尋和篩選 |
| 租戶詳情 | 查看單一租戶的用量統計 |
| 更新狀態 | 切換 active / suspended |
| 變更方案 | Free → Pro → Enterprise |
| 配額設定 | 自訂每個租戶的資源上限 |

### 3.3 配額管理

路徑：**管理 → 配額**

- 查看各租戶配額使用率
- 手動調整配額（覆蓋方案預設值）
- 套用方案預設配額
- 設定告警閾值
- 查看告警記錄

### 3.4 成本分析

路徑：**分析 → 成本**

- 每日用量趨勢
- 各租戶月度成本排行
- 異常偵測（突增用量）
- 預算預警

### 3.5 系統健康

路徑：**管理 → 系統健康**

檢查項目：
- 資料庫連線狀態
- Redis 連線狀態
- 應用啟動時間
- API 回應時間
- DB 連線池狀態

### 3.6 監控

路徑：`https://grafana.unihr.com`

Grafana Dashboard 提供：
- HTTP 請求量 / 錯誤率
- 回應時間分佈
- 並發連線數
- 系統資源使用

### 3.7 Feature Flags

路徑：**管理 → Feature Flags**

- 全域功能開關
- 指定租戶啟用新功能（金絲雀發佈）
- 環境控制（只在 staging 啟用）

---

## 4. FAQ 與 Troubleshooting

### Q1：上傳文件失敗怎麼辦？

**可能原因：**
- 檔案超過 50MB 上限
- 不支援的格式
- PDF 為純圖片（需 OCR 支援）

**解決方式：**
- 確認檔案大小和格式
- 若 PDF 為掃描件，確認系統已安裝 Tesseract OCR
- 查看錯誤訊息了解具體原因

### Q2：AI 回答不準確？

**可能原因：**
- 公司內規文件尚未上傳或處理中
- 文件品質較差（模糊、排版混亂）
- 問題描述不夠具體

**解決方式：**
- 確認文件已完成處理（狀態為 processed）
- 上傳清晰的 PDF 或 Word 文件
- 嘗試更具體的問題描述

### Q3：忘記密碼？

1. 在登入頁面點擊「忘記密碼」
2. 輸入註冊 Email
3. 收到重設密碼郵件
4. 點擊連結設定新密碼

### Q4：配額用完了怎麼辦？

- **員工** — 聯繫公司管理員
- **管理員** — 至「訂閱方案」頁面查看升級選項
- **系統管理員** — 可手動調整租戶配額

### Q5：SSO 登入失敗？

**檢查項目：**
1. SSO 設定中的 Client ID 和 Secret 是否正確
2. Redirect URI 是否設定正確
3. 允許的 Email Domain 是否包含使用者的 Domain
4. SSO Provider（Google/Microsoft）端是否啟用

### Q6：自訂域名設定失敗？

**常見問題：**
1. DNS TXT 記錄尚未生效（等待 5-10 分鐘）
2. TXT 記錄值填寫錯誤
3. DNS 服務商需要時間傳播

**解決方式：**
- 使用 `nslookup -type=TXT _unihr-verify.yourdomain.com` 確認記錄
- 等待 DNS 傳播後重新點擊「驗證」

### Q7：系統回應很慢？

**管理員檢查：**
1. 檢查系統健康 (`/admin/system/health`)
2. 查看 Grafana 監控面板
3. 確認 DB 連線池是否飽和
4. 確認 Celery Worker 是否正常

### Q8：如何匯出資料？

- **用量報表** — 稽核 → 用量統計 → 匯出（CSV/JSON）
- **對話記錄** — 目前需透過 API 匯出
- **文件清單** — 知識庫 → 文件管理 可查看完整清單
